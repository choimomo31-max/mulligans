<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>이미지 OCR 값 추출</title>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<style>
  body { font-family: Arial; padding: 20px; }
  img { max-width: 300px; margin-top: 10px; }
  .result { margin-top: 20px; font-size: 18px; }
</style>
</head>
<body>

<h2>이미지에서 PAR / G핸디 / Total 읽기</h2>

<input type="file" id="imageInput" accept="image/*">
<br>
<img id="preview">

<div class="result">
  <p>PAR: <span id="parValue">-</span></p>
  <p>G핸디: <span id="ghandiValue">-</span></p>
  <p>Total: <span id="totalValue">-</span></p>
</div>

<script>
document.getElementById('imageInput').addEventListener('change', function(e) {
  const file = e.target.files[0];
  const reader = new FileReader();

  reader.onload = function(event) {
    const img = document.getElementById('preview');
    img.src = event.target.result;

    Tesseract.recognize(
      event.target.result,
      'kor+eng',
      { logger: m => console.log(m) }
    ).then(({ data: { text } }) => {

      console.log("OCR 전체 텍스트:", text);

      // 정규식으로 값 추출
      const parMatch = text.match(/PAR\s*[:\-]?\s*(\d+)/i);
      const ghandiMatch = text.match(/G핸디\s*[:\-]?\s*(\d+)/i);
      const totalMatch = text.match(/Total\s*[:\-]?\s*(\d+)/i);

      document.getElementById('parValue').innerText = parMatch ? parMatch[1] : "찾을 수 없음";
      document.getElementById('ghandiValue').innerText = ghandiMatch ? ghandiMatch[1] : "찾을 수 없음";
      document.getElementById('totalValue').innerText = totalMatch ? totalMatch[1] : "찾을 수 없음";
    });
  };

  reader.readAsDataURL(file);
});
</script>

</body>
</html>
